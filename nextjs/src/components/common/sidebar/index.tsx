'use client';
import { Sidebar, SidebarContent, SidebarGroup, SidebarHeader, SidebarMenu, SidebarMenuButton, SidebarMenuItem, SidebarMenuSub, SidebarMenuSubButton, SidebarMenuSubItem, SidebarRail, SidebarTrigger } from "@/components/ui";
import { Collapsible, CollapsibleContent, CollapsibleTrigger } from "@/components/ui/collapsible";
import { navigation } from "./sidebar-list";
import { ChevronDown, ChevronRight } from "lucide-react";
import { usePathname } from "next/navigation";
import Link from "next/link";
import { cn } from "@/lib/utils";

const AdminSidebar = ({ ...props }: React.ComponentProps<typeof Sidebar>) => {
    const pathname = usePathname();
    return (
        <Sidebar {...props}>
            <SidebarHeader className="px-[24px] pt-[24px] bg-[hsl(220,27%,98%)]" >
                <SidebarMenu>
                    <SidebarMenuItem className="flex items-center justify-between gap-2">
                        <Link href={'/'}>
                            <svg width="103" height="29" viewBox="0 0 103 29" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M7.61207 29C6.09223 29 4.84287 28.8938 3.86399 28.6813C2.88512 28.4954 2.09944 28.2166 1.50696 27.8448C0.940239 27.4464 0.540959 26.9551 0.30912 26.3709C0.10304 25.7866 0 25.0962 0 24.2995C0 24.0604 0.01288 23.7285 0.0386399 23.3036C0.0643999 22.8521 0.10304 22.228 0.15456 21.4313C0.20608 20.6346 0.27048 19.6122 0.34776 18.364C0.450799 17.0893 0.579599 15.4959 0.734159 13.5838C0.914479 11.2202 1.05616 9.34799 1.1592 7.96703C1.26224 6.58608 1.33952 5.52381 1.39104 4.78022C1.44256 4.01007 1.46832 3.47894 1.46832 3.18681C1.49408 2.86813 1.50696 2.60256 1.50696 2.39011C1.50696 1.9652 1.50696 1.61996 1.50696 1.3544C1.53272 1.08883 1.55848 0.889653 1.58424 0.756868C1.63576 0.597528 1.70016 0.491301 1.77744 0.438188C1.88048 0.358517 2.02216 0.318682 2.20248 0.318682C3.72232 0.212455 5.01031 0.132785 6.06647 0.0796717C7.14839 0.0265572 8.08863 0 8.88719 0C10.8449 0 12.5193 0.172619 13.9104 0.517858C15.3272 0.83654 16.4735 1.30128 17.3493 1.91209C18.2252 2.5229 18.8692 3.27976 19.2813 4.18269C19.6935 5.08562 19.8996 6.10806 19.8996 7.25C19.8996 7.88736 19.8352 8.55128 19.7064 9.24176C19.5776 9.90568 19.3586 10.543 19.0495 11.1538C18.7404 11.7647 18.3153 12.3091 17.7744 12.7871C17.2592 13.2386 16.6023 13.5705 15.8037 13.783C17.2978 14.261 18.354 15.0577 18.9722 16.1731C19.5905 17.2619 19.8996 18.5632 19.8996 20.0769C19.8996 21.2985 19.7064 22.4538 19.32 23.5426C18.9336 24.6049 18.2638 25.5476 17.3107 26.3709C16.3576 27.1676 15.0953 27.8049 13.524 28.283C11.9526 28.761 9.98199 29 7.61207 29ZM9.81455 16.6511C9.53119 16.6511 9.18343 16.6777 8.77127 16.7308C8.35911 16.7573 7.93407 16.8104 7.49615 16.8901L7.07111 23.3832C7.99847 23.6754 8.83567 23.8214 9.58271 23.8214C10.3813 23.8214 11.0253 23.7019 11.5147 23.4629C12.0041 23.2239 12.3777 22.9318 12.6353 22.5865C12.9186 22.2147 13.0989 21.8164 13.1762 21.3915C13.2793 20.94 13.3308 20.5284 13.3308 20.1566C13.3308 19.174 13.0603 18.3507 12.5193 17.6868C12.0041 16.9963 11.1025 16.6511 9.81455 16.6511ZM8.19167 5.69643C8.14015 6.38691 8.08863 7.19689 8.03711 8.12638C8.01135 9.05586 7.95983 10.065 7.88255 11.1538C8.70687 11.3663 9.44103 11.4725 10.085 11.4725C10.8578 11.4725 11.4761 11.3796 11.9397 11.1937C12.4034 11.0078 12.7641 10.7688 13.0217 10.4767C13.305 10.1845 13.4853 9.86584 13.5626 9.52061C13.6657 9.17537 13.7172 8.84341 13.7172 8.52473C13.7172 7.70147 13.4467 6.99771 12.9057 6.41346C12.3905 5.80266 11.4889 5.49725 10.2009 5.49725C9.91759 5.49725 9.59559 5.52381 9.23495 5.57692C8.90007 5.60348 8.55231 5.64332 8.19167 5.69643Z" fill="#3358FF" />
                                <path d="M25.869 28.6016C25.2311 28.6016 24.7065 28.538 24.2949 28.4107C23.904 28.2623 23.5851 28.0607 23.3382 27.8062C23.1118 27.5516 22.9472 27.2441 22.8444 26.8835C22.7621 26.5016 22.7209 26.0668 22.7209 25.5789C22.7209 25.2607 22.7312 24.8153 22.7518 24.2426C22.7929 23.6486 22.8547 22.8426 22.937 21.8244C23.0193 20.785 23.1118 19.4804 23.2147 17.9107C23.3382 16.3198 23.4822 14.3577 23.6468 12.0244C23.6674 11.5577 23.7188 11.282 23.8011 11.1971C23.8629 11.1335 24.0275 11.1017 24.2949 11.1017H25.4986C26.1365 11.1017 26.6509 11.1653 27.0418 11.2926C27.4533 11.4198 27.7722 11.6107 27.9986 11.8653C28.2455 12.1198 28.4101 12.4274 28.4924 12.788C28.5953 13.1486 28.6467 13.5517 28.6467 13.9971C28.6467 14.3153 28.6261 14.7926 28.585 15.4289C28.5438 16.0653 28.4821 16.935 28.3998 18.038C28.3381 19.1198 28.2455 20.4774 28.122 22.1107C27.9986 23.7229 27.8443 25.6744 27.6591 27.9653C27.6385 28.2198 27.5871 28.3895 27.5048 28.4744C27.4225 28.5592 27.2476 28.6016 26.9801 28.6016H25.869ZM23.6777 7.34711C23.6777 6.49863 23.976 5.83044 24.5727 5.34257C25.1694 4.85469 25.9719 4.61075 26.9801 4.61075C27.8648 4.61075 28.5027 4.80166 28.8936 5.18347C29.3051 5.54408 29.5109 6.03196 29.5109 6.64711C29.5109 7.43196 29.2228 8.08953 28.6467 8.61984C28.0912 9.12893 27.2681 9.38347 26.1776 9.38347C24.511 9.38347 23.6777 8.70468 23.6777 7.34711Z" fill="#3358FF" />
                                <path d="M46.0306 26.0244C46.0306 26.1304 45.9791 26.3426 45.8763 26.6607C45.7734 26.9789 45.6088 27.3077 45.3824 27.6471C45.1561 27.9865 44.868 28.2835 44.5183 28.538C44.189 28.7926 43.7878 28.9198 43.3146 28.9198C42.759 28.9198 42.2035 28.7289 41.648 28.3471C41.113 27.9653 40.578 27.4456 40.0431 26.788C39.5081 26.1304 38.9628 25.3562 38.4073 24.4653C37.8723 23.5532 37.3271 22.5668 36.7715 21.5062C36.6892 22.6304 36.6069 23.7335 36.5246 24.8153C36.4423 25.8971 36.36 26.9471 36.2777 27.9653C36.2571 28.2198 36.2057 28.3895 36.1234 28.4744C36.0411 28.5592 35.8662 28.6016 35.5987 28.6016H34.4876C33.8498 28.6016 33.3251 28.538 32.9136 28.4107C32.5021 28.2623 32.1831 28.0607 31.9568 27.8062C31.7305 27.5516 31.5659 27.2335 31.463 26.8517C31.3807 26.4486 31.3395 25.9926 31.3395 25.4835C31.3395 25.2289 31.3498 24.9638 31.3704 24.688C31.391 24.4123 31.4218 24.0198 31.463 23.5107C31.5042 23.0017 31.5556 22.3335 31.6173 21.5062C31.6996 20.6789 31.7922 19.5865 31.8951 18.2289C31.998 16.8713 32.1111 15.2062 32.2346 13.2335C32.3786 11.2395 32.5329 8.82135 32.6975 5.97893C32.7181 5.51226 32.7696 5.2365 32.8519 5.15166C32.9136 5.08802 33.0782 5.0562 33.3457 5.0562H34.5494C35.1872 5.0562 35.7119 5.13044 36.1234 5.27893C36.5349 5.42741 36.8641 5.62893 37.111 5.88347C37.3579 6.13802 37.5225 6.43499 37.6048 6.77438C37.7077 7.11378 37.7592 7.46378 37.7592 7.82438C37.7592 8.0365 37.7386 8.39711 37.6974 8.9062C37.6768 9.39408 37.646 9.99862 37.6048 10.7198C37.5637 11.4198 37.502 12.2153 37.4197 13.1062C37.3579 13.9971 37.2962 14.9304 37.2345 15.9062L42.1726 11.2607C42.3578 11.091 42.5224 10.9744 42.6664 10.9107C42.8311 10.8471 42.9545 10.8153 43.0368 10.8153C43.2631 10.8153 43.5101 10.9638 43.7775 11.2607C44.045 11.5577 44.2919 11.9077 44.5183 12.3107C44.7652 12.6926 44.9606 13.0956 45.1047 13.5198C45.2693 13.9229 45.3516 14.2517 45.3516 14.5062C45.3516 15.1213 44.868 15.7683 43.901 16.4471C42.9545 17.1259 41.5142 17.8895 39.5801 18.738C40.4443 19.735 41.2673 20.6471 42.0492 21.4744C42.8311 22.3017 43.51 23.0335 44.0862 23.6698C44.6829 24.3062 45.1561 24.8259 45.5059 25.2289C45.8557 25.632 46.0306 25.8971 46.0306 26.0244Z" fill="#3358FF" />
                                <path d="M55.199 10.7835C56.9479 10.7835 58.2339 11.1441 59.0569 11.8653C59.8799 12.5653 60.2914 13.4668 60.2914 14.5698C60.2914 15.5032 60.0034 16.2138 59.4273 16.7017C58.8717 17.1895 58.059 17.4335 56.989 17.4335C56.701 17.4335 56.5055 17.4017 56.4026 17.338C56.2998 17.2744 56.2483 17.1577 56.2483 16.988C56.2483 16.7971 56.2277 16.585 56.1866 16.3517C56.166 16.0971 56.094 15.8638 55.9705 15.6517C55.8677 15.4183 55.6928 15.2274 55.4459 15.0789C55.2195 14.9304 54.8903 14.8562 54.4582 14.8562C53.8821 14.8562 53.4192 15.0047 53.0694 15.3017C52.7196 15.5774 52.5447 15.9274 52.5447 16.3517C52.5447 16.7971 52.7196 17.1577 53.0694 17.4335C53.4397 17.688 53.8924 17.932 54.4274 18.1653C54.9829 18.3986 55.5796 18.6426 56.2174 18.8971C56.8553 19.1304 57.4417 19.4486 57.9767 19.8517C58.5322 20.2547 58.9849 20.7638 59.3347 21.3789C59.705 21.9729 59.8902 22.7471 59.8902 23.7017C59.8902 25.2289 59.3655 26.4804 58.3162 27.4562C57.2668 28.432 55.6928 28.9198 53.5941 28.9198C53.0179 28.9198 52.3492 28.8668 51.5879 28.7607C50.8472 28.6759 50.1373 28.538 49.4583 28.3471C48.7794 28.135 48.2032 27.8592 47.73 27.5198C47.2773 27.1804 47.051 26.7562 47.051 26.2471C47.051 26.0562 47.0819 25.8229 47.1436 25.5471C47.2259 25.2713 47.3391 25.0062 47.4831 24.7516C47.6477 24.4971 47.8329 24.285 48.0386 24.1153C48.265 23.9244 48.5324 23.8289 48.8411 23.8289C49.088 23.8289 49.3143 23.8926 49.5201 24.0198C49.7258 24.1471 49.9625 24.285 50.2299 24.4335C50.518 24.5607 50.8678 24.688 51.2793 24.8153C51.6908 24.9426 52.2361 25.0062 52.9151 25.0062C53.4294 25.0062 53.8821 24.9426 54.273 24.8153C54.6846 24.688 54.8903 24.4017 54.8903 23.9562C54.8903 23.5532 54.7257 23.235 54.3965 23.0017C54.0673 22.7471 53.6455 22.5138 53.1311 22.3017C52.6373 22.0895 52.092 21.8668 51.4953 21.6335C50.9192 21.3789 50.374 21.0501 49.8596 20.6471C49.3658 20.2441 48.9542 19.735 48.625 19.1198C48.2958 18.4835 48.1312 17.6668 48.1312 16.6698C48.1312 15.588 48.337 14.6759 48.7485 13.9335C49.1806 13.1698 49.7258 12.5547 50.3842 12.088C51.0632 11.6214 51.8245 11.2926 52.6681 11.1017C53.5117 10.8895 54.3554 10.7835 55.199 10.7835Z" fill="#3358FF" />
                                <path d="M65.6841 28.6016C65.0463 28.6016 64.5216 28.538 64.1101 28.4107C63.7191 28.2623 63.4002 28.0607 63.1533 27.8062C62.927 27.5516 62.7624 27.2441 62.6595 26.8835C62.5772 26.5016 62.536 26.0668 62.536 25.5789C62.536 25.2607 62.5463 24.8153 62.5669 24.2426C62.608 23.6486 62.6698 22.8426 62.7521 21.8244C62.8344 20.785 62.927 19.4804 63.0298 17.9107C63.1533 16.3198 63.2973 14.3577 63.4619 12.0244C63.4825 11.5577 63.534 11.282 63.6163 11.1971C63.678 11.1335 63.8426 11.1017 64.1101 11.1017H65.3137C65.9516 11.1017 66.466 11.1653 66.8569 11.2926C67.2684 11.4198 67.5874 11.6107 67.8137 11.8653C68.0606 12.1198 68.2252 12.4274 68.3075 12.788C68.4104 13.1486 68.4618 13.5517 68.4618 13.9971C68.4618 14.3153 68.4412 14.7926 68.4001 15.4289C68.3589 16.0653 68.2972 16.935 68.2149 18.038C68.1532 19.1198 68.0606 20.4774 67.9371 22.1107C67.8137 23.7229 67.6594 25.6744 67.4742 27.9653C67.4536 28.2198 67.4022 28.3895 67.3199 28.4744C67.2376 28.5592 67.0627 28.6016 66.7952 28.6016H65.6841ZM63.4928 7.34711C63.4928 6.49863 63.7911 5.83044 64.3878 5.34257C64.9845 4.85469 65.787 4.61075 66.7952 4.61075C67.6799 4.61075 68.3178 4.80166 68.7087 5.18347C69.1202 5.54408 69.326 6.03196 69.326 6.64711C69.326 7.43196 69.0379 8.08953 68.4618 8.61984C67.9063 9.12893 67.0833 9.38347 65.9927 9.38347C64.3261 9.38347 63.4928 8.70468 63.4928 7.34711Z" fill="#3358FF" />
                                <path d="M78.9631 24.688C79.5598 24.688 80.0742 24.6032 80.5063 24.4335C80.959 24.2638 81.3499 24.0729 81.6791 23.8607C82.0083 23.6486 82.2861 23.4577 82.5124 23.288C82.7388 23.1183 82.9445 23.0335 83.1297 23.0335C83.6029 23.0335 83.8396 23.3517 83.8396 23.988C83.8396 24.1365 83.8087 24.3486 83.747 24.6244C83.6852 24.8789 83.6029 25.1547 83.5001 25.4517C83.3972 25.7274 83.284 25.9926 83.1606 26.2471C83.0577 26.5016 82.9548 26.6926 82.8519 26.8198C82.749 26.9259 82.5639 27.0956 82.2964 27.3289C82.0495 27.5623 81.71 27.7956 81.2779 28.0289C80.8458 28.2623 80.3417 28.4638 79.7656 28.6335C79.1895 28.8244 78.5516 28.9198 77.852 28.9198C77.0702 28.9198 76.2574 28.8032 75.4138 28.5698C74.5908 28.3153 73.8398 27.891 73.1608 27.2971C72.4818 26.682 71.916 25.8653 71.4633 24.8471C71.0312 23.8077 70.8152 22.5138 70.8152 20.9653C70.8152 20.4138 70.846 19.788 70.9077 19.088C70.9901 18.3668 71.1444 17.635 71.3707 16.8926C71.597 16.1289 71.8954 15.3865 72.2657 14.6653C72.6567 13.9229 73.1711 13.2653 73.8089 12.6926C74.4468 12.1198 75.2081 11.6638 76.0928 11.3244C76.9982 10.9638 78.0681 10.7835 79.3026 10.7835C80.3108 10.7835 81.175 10.9107 81.8952 11.1653C82.6359 11.3986 83.2429 11.7274 83.7161 12.1517C84.1893 12.5547 84.5391 13.032 84.7655 13.5835C85.0124 14.135 85.1358 14.7289 85.1358 15.3653C85.1358 16.5107 84.786 17.3592 84.0865 17.9107C83.3869 18.441 82.3993 18.7062 81.1236 18.7062C80.8149 18.7062 80.5989 18.685 80.4754 18.6426C80.3726 18.5789 80.3211 18.4517 80.3211 18.2607C80.3211 17.7517 80.3108 17.2956 80.2903 16.8926C80.2697 16.4895 80.208 16.1501 80.1051 15.8744C80.0228 15.5986 79.889 15.3865 79.7038 15.238C79.5187 15.0895 79.2512 15.0153 78.9014 15.0153C78.2635 15.0153 77.7492 15.2274 77.3582 15.6517C76.9879 16.0759 76.6998 16.5956 76.494 17.2107C76.3089 17.8047 76.1854 18.4198 76.1237 19.0562C76.0825 19.6926 76.062 20.2229 76.062 20.6471C76.062 22.1532 76.2883 23.2032 76.741 23.7971C77.2142 24.391 77.9549 24.688 78.9631 24.688Z" fill="#3358FF" />
                                <path d="M93.7718 28.9198C92.3521 28.9198 91.169 28.7183 90.2225 28.3153C89.2966 27.891 88.5559 27.3183 88.0003 26.5971C87.4448 25.8759 87.0539 25.038 86.8275 24.0835C86.6012 23.1077 86.488 22.0683 86.488 20.9653C86.488 19.6926 86.6321 18.4517 86.9201 17.2426C87.2288 16.0123 87.7431 14.9198 88.4633 13.9653C89.1834 13.0107 90.1299 12.2471 91.3027 11.6744C92.4961 11.0804 93.9776 10.7835 95.7471 10.7835C98.3396 10.7835 100.191 11.441 101.303 12.7562C102.434 14.0501 103 15.8744 103 18.2289C103 18.8865 102.949 19.6183 102.846 20.4244C102.763 21.2092 102.588 21.9941 102.321 22.7789C102.074 23.5638 101.724 24.3274 101.272 25.0698C100.84 25.8123 100.284 26.4698 99.605 27.0426C98.926 27.6153 98.103 28.0713 97.1359 28.4107C96.1895 28.7501 95.0681 28.9198 93.7718 28.9198ZM95.2224 15.0153C94.4405 15.0153 93.813 15.2274 93.3397 15.6517C92.8871 16.0547 92.5373 16.5532 92.2904 17.1471C92.064 17.7198 91.9097 18.335 91.8274 18.9926C91.7657 19.6289 91.7348 20.1698 91.7348 20.6153C91.7348 22.0153 91.9509 23.0441 92.383 23.7017C92.815 24.3592 93.4323 24.688 94.2348 24.688C94.9549 24.688 95.5413 24.4547 95.994 23.988C96.4672 23.5213 96.8273 22.9592 97.0742 22.3017C97.3417 21.6441 97.5166 20.9547 97.5989 20.2335C97.7018 19.5123 97.7532 18.9077 97.7532 18.4198C97.7532 17.3592 97.5577 16.532 97.1668 15.938C96.7964 15.3229 96.1483 15.0153 95.2224 15.0153Z" fill="#3358FF" />
                            </svg>
                        </Link>
                        <SidebarTrigger className="-ml-1 cursor-pointer" />
                    </SidebarMenuItem>
                </SidebarMenu>
            </SidebarHeader>
            <SidebarContent className="px-[16px]" style={{backgroundColor: "hsl(220, 27%, 98%)"}}>
                <SidebarGroup>
                    <SidebarMenu>
                        {navigation.map((item) => (
                            <Collapsible
                                key={item.title}
                                defaultOpen={item.items?.some((subItem) => pathname.includes(subItem.url))}
                                className="group/collapsible"
                            >
                                <SidebarMenuItem>
                                    <CollapsibleTrigger asChild className="cursor-pointer">
                                        <SidebarMenuButton>
                                            <item.icon />
                                            {item.title}{" "}
                                            <ChevronRight className="ml-auto group-data-[state=open]/collapsible:hidden" />
                                            <ChevronDown className="ml-auto group-data-[state=closed]/collapsible:hidden" />
                                        </SidebarMenuButton>
                                    </CollapsibleTrigger>
                                    {item.items?.length ? (
                                        <CollapsibleContent>
                                            <SidebarMenuSub>
                                                {item.items.map((item) => (
                                                    <SidebarMenuSubItem key={item.title} aria-disabled={item.disabled}>
                                                        <SidebarMenuSubButton
                                                            asChild
                                                            isActive={pathname.includes(item.url)}
                                                            className={cn("data-[active=true]:bg-[#E4E4E7]", item.disabled && "cursor-not-allowed pointer-events-none text-muted-foreground/50 line-through")}
                                                        >
                                                            <Link href={item.url}>{item.title}</Link>
                                                        </SidebarMenuSubButton>
                                                    </SidebarMenuSubItem>
                                                ))}
                                            </SidebarMenuSub>
                                        </CollapsibleContent>
                                    ) : null}
                                </SidebarMenuItem>
                            </Collapsible>
                        ))}
                    </SidebarMenu>
                </SidebarGroup>
            </SidebarContent>
            <SidebarRail />
        </Sidebar>
    );
};

export { AdminSidebar };